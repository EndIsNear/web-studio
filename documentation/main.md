- [Уеб базирана среда за разработка на интерактивни уеб приложения с графична насоченост](#уеб-базирана-среда-за-разработка-на-интерактивни-уеб-приложения-с-графична-насоченост)
- [Увод](#увод)
- [Речник](#речник)
- [Описание на проблема](#описание-на-проблема)
- [Описание на решението](#описание-на-решението)
  - [Контролен панел](#контролен-панел)
  - [Описание на резултатния сайт](#описание-на-резултатния-сайт)
    - [Визуална част](#визуална-част)
    - [Програмна част](#програмна-част)
- [Редакотор на кода](#редакотор-на-кода)
- [Използвани технологии](#използвани-технологии)
- [Ръководство за употреба и освновни примери](#ръководство-за-употреба-и-освновни-примери)
  - [Работа с начална страница](#работа-с-начална-страница)
  - [Работа с редактора на код](#работа-с-редактора-на-код)
  - [Основните видове възли в код-графът и техните параметри](#основните-видове-възли-в-код-графът-и-техните-параметри)
    - [Възли за работа с потока (хода) на кода](#възли-за-работа-с-потока-хода-на-кода)
    - [Възли за работа с числа](#възли-за-работа-с-числа)
    - [Възли за работа с масиви](#възли-за-работа-с-масиви)
    - [Възли за рисуване в платно (canvas)](#възли-за-рисуване-в-платно-canvas)
  - [Основни примери](#основни-примери)
- [Заключение](#заключение)
- [Източници](#източници)

# Уеб базирана среда за разработка на интерактивни уеб приложения с графична насоченост

# Увод

Проекта представлява уеб сървър който сервира уеб страница предоставяща възможността да се създават други уеб страници без знания по програмиране - чрез визуално програмиране. Разделя се в две основни части - фронт-енд и бек-енд. Те ще си комуникират чрез web socket протокол. Фронт-енд частта ще дава възможността на потребителя да създава нови елементи в резултатната страница чрез подходящ интерфейс - бутони, тескт, картинки и т.н.. Също така потребителят ще може да програмира интерактивни събития чрез flow-based-programing (https://en.wikipedia.org/wiki/Flow-based_programming). Този модул ще поддържа основни програмни приоми - създава и четене на променлива, възможност за показване на променливите във резултатния сайт, основни математически и логически операции, цикли (while/for), условна конструкция (if, if-else), таймери, възможност за повикване на част от кода след натискане на бутон (button callbacks) и други. Фронт-ендът ще бъде отговорен да сериализира данните въведени от потребителя и да ги изпрати на сървъра (бек-енд). Там те ще бъдат преобразуват до html, css и Vue.js (https://vuejs.org/) за визуалната част. За програмната част ще се десериализира графът от нодове и ще бъде транслиран до javascript код. Новополучения сайт ще бъде изпратен обратно до фронтенда и ще бъде показан във финалният му вид на потребителя.


# Речник

- front-end
- back-end
- http/https
- websocket
- canvas
- framework
- json

# Описание на проблема

- система за порграмиране на графични уеб приложения
- различни употреби
  
# Описание на решението

Целта на поставената задача е да се създаде уеб страница (сайт) който да предоставя възможноста на потребител без програмни познания да създаде интереактвен сайт. Сайта се разделя на два основни компонента, front-end или клиентска част и back-end или сървърна част. Front-end е частта от кода която се изпълнява в клиентския браузър, тя е отговорна за почти всичко което вижда клиентът. Back-end е часта която се изпълнява от частен сървър. Сървръната част е отговорна, за зареждането на страницата във браузъра на клиента посредством https и за последващото обработване на данните на клиента. След като клиентската част бъде заредена от браузъра на клиента, всяка инстанция от нея установява връзка с web socket протокола, посредством него клиетската част може лесно да изпраща и приема данни от сървърната част без да се налага страницата да се презарежда всеки път. 

Клиентската част се състои от две уеб страници. Първата предоставя възможността за контролиране на съдържанието на резултатния уебсайт, както и показва самия резултат в реално време. Текущото решение дава възможност са създаване/изтриване/преместване на бутони, текст и canvas. Втората страница позволява посредством визуално програмиране да се създава логиката зад сайта. Посредством специално пригоден редактор, клиентът може да редактира "кодът" който резултатът ще изпълнява. Тъй като генераторът на код е основната задача в този труд на нея има отделена цяла глава. Всяка от двете страници серилизира всички промени по данните в json формат след което чрез web socket връзката ги изпраща до сървъра. След като сървъра обработи новите данни той връща резултатът отвно през web socket и се показва на потребителя. При добра интернет връзка това се случва моментално и недоловимо за потребителя.

Основната задача на сървърната част е да приема юсърските промени, да ре-генерира резултатът и да го върне обратни на клиента. 

## Контролен панел

описание на основните функции и как работят


## Описание на резултатния сайт

По същество решението на проблемът се разделя в две основни части - визуална и програмна. Отговорнистите на визуалната част се свеждат до презентацията на целия продукт пред потребителя - бутони, тескт, картинки, различни анимации и други. Тя е минималистична, единствената и цел е да може да поддържа работата с програмната, фокусът на тази работа е върху програмната част. Оснвоната задача на програмната част е да предостави на потребителя набор от инструменти чрез който, въпреки че няма необходимите знания по програмирен, на създаде интерактивни елементи в уеб приложението (програми).

### Визуална част
хтмл цсс променливи, възможности пред потребителя и кратко описание как работят

### Програмна част


# Редакотор на кода

Всички променливи споменати поне един път в редактора на код се създават автоматично

# Използвани технологии

- golang/javascript+vue/HTML+CSS
- Защо?
  - golang - идеален за семпли уеб сървъри като искания тук
  - javascript - лесен за генериране и ъпдейтване
  - html/css - супер лесен език за описване на UI
- websocket - предавене на json-и през уеб сокети
- Описание на използваните frameworks/библиотеки
  - Vue - framework, използван само за data binging - ъпдейтване на UI след като стейта на JS се ъпдейтне.
  - baklava JS - Малка библиотека за визуализация на графът от нодове от който се генерира кодът.

# Ръководство за употреба и освновни примери

За да се създаде нова страница обикновенно се добавят нови бутони и текст в началната страница, след което в редакотра за код те могат да се използват. Цяляата логика на програмата се създава в редактора на код под формата на граф, създавен от нодове описани по-надолу и връзки между тях.

## Работа с начална страница

![First example](/documentation/images/homepage.png)

Началната страница има 3 основи компонента:

1. Контролен панел - от него могат да се извършват основните операции както следва:
   * Code editor - отраря страницата за редактора на код
   * View the result - Отваря само резултатния сайт в нова страница.
   * CSS (Styling) - Включва и изключва стилъът на сайтът. Когато е изключен изгенерираният CSS файл е празен.
   * Canvas (Drawing) - Когато е включен, резултатния сайт съдържа и платно в което може да се рисува чрез възли в редактора на код.
   * Падащо меню с предварително създадените [примери](#основни-примери), то съдържа седем примера, няколко основни и два по-сложни.
   * Load example - с този бутон се зарежда примерът избран от горното меню.
   * Add button - Добавя бутон в новосъздадения сайт. След натискане се появавят 2 полета за попълване съответно - текст на бутона и уникален идентификатор. Идентификатора се ползва в редактора на код, за да може да се изпълнява логика при натискането му.
   * Add header - Добавя текстово поле в новосъздадения сайт. След натискане на бутона се появява поле за попълване на новият текст.
2. Списък от всички създадени елементи в изходната страница - тази част съдържа лист от всички създадени бутони и текстови полета. Също така всеки елемент има бутон за премахване (изтриване) и са посочени всичките идентификатори на бутоните.
3. Резултатът сайт - той показан в реално време и се обновява след вскяа промяна. 

## Работа с редактора на код

![First example](/documentation/images/codingpage.png)

Страницата с редактора на кода има 2 основни компонента:

1. Контролен панел - от него може да се записва текущото състояние на редактора Save и потребителя да се връща обратно към основната страница - Go Back.
2. Редактора на кодовата схема - тук потребителя може да създава нови възли (nodes), връзки между тях и др. Тук си залужава да споменем другите две маркирани части.
3. Меню за създаване на нови възли - появява се след натискане на десен бутон в редактора. Различните видове възли ще разгледаме [по-напред в тази глава](#основните-видове-възли-в-код-графът-и-техните-параметри).
4. Така изглежда вече създаден приемр от 4 възли и връзки м/у тях.

## Основните видове възли в код-графът и техните параметри

Всеки възел в графа е отговорен за ралзична функционалност - наприемр има възел отговорен за записване на число в променлива. Възлита имат 3 различна вида свойстава:
1. Параметри - това е най-простият вид, от тях и към тях не може да има връзки, те служат единствено за описване на възела. Наприемр името на променлива при записване на такава.
2. Входни парамтри - Това са параметри които приемат връзки от други възли, понякога може освен входни параметри да са и прости параметри. Например стойностите при събиране на числа.
3. Изходни парамтри - Това са параметри от които могат да излизат връзки. Наприемр резултат или ход на програмта.

За да може да се свържат 2 параметъра единият трябва да е изходен а другия входен, освен това трябва да имат еднакъв тип - отбелязан с цвят в редактора. Към момента има три различни вида връзки, по тях "протичат": числа, булеви стойност или ход на програмата (flow).

### Възли за работа с потока (хода) на кода

Този тип възли са отговорини за хода на програмата. От тях запова изпълнението на всеки фрагмент в кода.Също така то се нарпавлява от тях, например с Условие и цикъл.
- При започване (On start)
- При времеви интервал (On timer)
- При клик на бутон (On click)
- При клик на платното (On Canvas click)
- Разделяна на потока (Split flow)
- Условие (If/Else)
- Цикъл (For loop)

### Възли за работа с числа

Тези нодове са отговорни за всички операци свързани с числа, както и за чете и записвани на променливи.
- Четене на число (Read num)
- Писане на число (Write num)
- Числови оператори (Operators)
- Сравняване на числа (Compare num)
- Случайно число (Random num)
- Модул на число (Absolute num)
- Синус (Sinus)
- Косинус (Cosinus)

### Възли за работа с масиви

Тези нодове отговарят за всички основни операции с числови масиви. Четене на размер, четене на елемент, добавяне на елемент и други.
- Инициализация на масив (Init array)
- Четене на големината на масив (Read array size)
- Четена на число от масив (Read array num)
- Писане на число в масив (Write array num)
- Добавяне на число накрая (Push back num)

### Възли за рисуване в платно (canvas)

Тези нодове отговарят за всички основни операции платно за рисуване (canvas). За да работят коректно трябва да има добавен канвас в резултатния сайт.
- Рисуване на правоъгълник (Draw rectangle)
- Рисуване на линия (Draw line)
- Рисуване на кръг (Draw circle)
- Изчистване на правоъгълник (Clear rectangle)

## Основни примери


- Разглеждане на основните примери в нарастваща сложност
![First example](/documentation/images/example1.png)

# Заключение

- възможности за развитие
  - нови нодове
  - Работа с логически операции
  - Работа със стрингове
  - Динамично генериране на нодове от класове и функции
  - Верификация код графът на фронт-енд страната

# Източници

- [Wikipedia flow based programing](https://en.wikipedia.org/wiki/Flow-based_programming)
- https://github.com/newcat/baklavajs
- https://vuejs.org/


